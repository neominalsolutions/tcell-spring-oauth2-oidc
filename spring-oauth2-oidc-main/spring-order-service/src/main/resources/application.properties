server.port=5002
spring.application.name=spring-order-service
spring.profiles.active=dev


#Spring Boot Admin ba?lant?s?
spring.boot.admin.client.url=http://localhost:8086
spring.boot.admin.client.instance.name=OrderService
spring.boot.admin.client.instance.service-url=http://localhost:5002
spring.boot.admin.client.username=admin
spring.boot.admin.client.password=P@ssword1


#Actuator Endpointlerini açmak
# Metric de?erleri için
management.endpoints.web.base-path=/actuator
#Local Servis oldu?undan Spring Boot Admin Her?eyi görüntülesin
management.endpoints.web.exposure.include=*

# Healt endpointleri detayl? göster
# Bu ayar yap?lmazsa sadece UP görünür.
# management.endpoint.health.show-details= always

#Env de?erlerini maskeli gösterme
# management.endpoint.env.show-values=always


#Eureka Client Settings

# Di?er clientlar bizi görsün.
eureka.client.register-with-eureka=true
# Eureka client ayarlar? de?irse refresh izin verme. Canl? ortam için
eureka.client.refresh.enable=true
# Eureka Servera gidip register olan servisler ile ilgili bir bilgi çekmek isteyebiliriz
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone = http://localhost:8761/eureka
eureka.instance.appname=OrderClient
eureka.instance.prefer-ip-address=false

#Kafka Settings



#Spring Cloud Kafka Binder
# Otomatik Topic olu?mas?
spring.cloud.stream.kafka.binder.auto-create-topics=true
# Kafka Port
spring.cloud.stream.kafka.binder.brokers=localhost:29092

#OUT -> Mesaj Gönderme
spring.cloud.stream.bindings.orderSubmit-out-0.destination=order_topic

# Eventin dinlendi?i consumer function
# orderSubmit-in-0 burdaki isimlendirme format? ile cloud function
# ayn? isimde olmal?d?r
spring.cloud.function.definition=doShipment;doPayment
# Not: Grup Idlerini farkl? yapt?k ama ayn? topicten dinleyece?iz.
# Bir mesaj bu örnekte fanout olacak



# Payment Service Consumer
spring.cloud.stream.bindings.doPayment-in-0.destination=order_topic
#Consumer grup tan?mlanmas?
spring.cloud.stream.bindings.doPayment-in-0.group=payment_orderSubmitted

# Shipping Service Consumer
spring.cloud.stream.bindings.doShipment-in-0.destination=order_topic
#Consumer grup tan?mlanmas?
spring.cloud.stream.bindings.doShipment-in-0.group=shipping_orderSubmitted


# Burada Consume ederken bir runtime exception oldu?u dü?ündü?ümüzde bu hatal? mesajlar teslim eilirken hata al?nd???nda
# genelde ayr? bir kuyruk mekanizmas?na at?l?r. DLQ
# Hata kuruk mekanizmas?n? aya?a kald?r.
spring.cloud.stream.kafka.bindings.doShipment-in-0.consumer.enable-dlq=true
spring.cloud.stream.kafka.bindings.doShipment-in-0.consumer.dlq-name=shipping_dlq_topic
# Hata durumunda bunu i?lendi olarak i?aretleme
spring.cloud.stream.kafka.bindings.doShipment-in-0.consumer.auto-commit-on-error=false



management.tracing.sampling.probability= 1.0
management.zipkin.tracing.endpoint= http://localhost:9411/api/v2/spans

logging.level.com.netflix.eureka= INFO
logging.level.com.netflix.discovery= INFO